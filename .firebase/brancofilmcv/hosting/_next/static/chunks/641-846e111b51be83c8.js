"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{1221:function(e,r,n){n.d(r,{L:function(){return z}});var t=n(7437),s=n(4508),a=n(2102),i=n(2869),l=n(2265),d=n(3643);let o=l.forwardRef((e,r)=>{let{className:n,children:a,...i}=e;return(0,t.jsxs)(d.fC,{ref:r,className:(0,s.cn)("relative overflow-hidden",n),...i,children:[(0,t.jsx)(d.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,t.jsx)(c,{}),(0,t.jsx)(d.Ns,{})]})});o.displayName=d.fC.displayName;let c=l.forwardRef((e,r)=>{let{className:n,orientation:a="vertical",...i}=e;return(0,t.jsx)(d.gb,{ref:r,orientation:a,className:(0,s.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...i,children:(0,t.jsx)(d.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=d.gb.displayName;var u=n(5466),f=n(5805),m=n(8736),x=n(1047),h=n(5252),v=n(4794),p=n(9525),g=n(8728),b=n(2489),j=n(7692),N=n(8293),y=n(7648),w=n(9376);let C=[{title:"Dashboard",href:"/dashboard",icon:u.Z,roles:["admin","atendente","instalador"],description:"Vis\xe3o geral do sistema"},{title:"Clientes",href:"/customers",icon:f.Z,roles:["admin","atendente"],description:"Gerenciar clientes e ve\xedculos"},{title:"Ordens de Servi\xe7o",href:"/orders",icon:m.Z,roles:["admin","atendente","instalador"],description:"Criar e gerenciar OS"},{title:"Agenda",href:"/schedule",icon:x.Z,roles:["admin","atendente","instalador"],description:"Agendamentos e calend\xe1rio"},{title:"Caixa",href:"/cashbox",icon:h.Z,roles:["admin","atendente"],description:"Controle financeiro"},{title:"Estoque",href:"/inventory",icon:v.Z,roles:["admin","atendente"],description:"Rolos e tonalidades"},{title:"Servi\xe7os",href:"/services",icon:p.Z,roles:["admin","atendente"],description:"Tabela de pre\xe7os"},{title:"Configura\xe7\xf5es",href:"/settings",icon:g.Z,roles:["admin"],description:"Usu\xe1rios e configura\xe7\xf5es"}];function k(e){let{className:r}=e,{user:n,logout:d,hasRole:c}=(0,a.a)(),u=(0,w.usePathname)(),[f,m]=(0,l.useState)(!1),x=async()=>{await d()},h=C.filter(e=>c(e.roles)),v=()=>{var e,r;return(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"p-6 border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Oficina Insufilm"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manager"})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"md:hidden",onClick:()=>m(!1),children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})})]})}),(0,t.jsx)("div",{className:"p-4 border-b",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-sm font-medium text-primary-foreground",children:(null==n?void 0:null===(e=n.name)||void 0===e?void 0:e.charAt(0))||(null==n?void 0:null===(r=n.email)||void 0===r?void 0:r.charAt(0))||"U"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:(null==n?void 0:n.name)||(null==n?void 0:n.email)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:null==n?void 0:n.role})]})]})}),(0,t.jsx)(o,{className:"flex-1 px-3",children:(0,t.jsx)("div",{className:"space-y-1 py-4",children:h.map(e=>{let r=e.icon,n=u===e.href;return(0,t.jsx)(y.default,{href:e.href,onClick:()=>m(!1),children:(0,t.jsxs)("div",{className:(0,s.cn)("flex items-center space-x-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-accent hover:text-accent-foreground",n?"bg-accent text-accent-foreground":"text-muted-foreground"),children:[(0,t.jsx)(r,{className:"h-4 w-4"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),e.description&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.href)})})}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsxs)(i.z,{variant:"ghost",className:"w-full justify-start",onClick:x,children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-3"}),"Sair"]})})]})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",className:"md:hidden fixed top-4 left-4 z-50",onClick:()=>m(!0),children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})}),f&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>m(!1)}),(0,t.jsx)("div",{className:(0,s.cn)("hidden md:flex w-64 flex-col bg-card border-r",r),children:(0,t.jsx)(v,{})}),(0,t.jsx)("div",{className:(0,s.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-card border-r transform transition-transform duration-200 ease-in-out md:hidden",f?"translate-x-0":"-translate-x-full"),children:(0,t.jsx)(v,{})})]})}function I(e){let{children:r,requiredRoles:n,fallback:s}=e,{user:i,loading:d}=(0,a.a)(),o=(0,w.useRouter)();return((0,l.useEffect)(()=>{d||i||o.push("/login")},[i,d,o]),d)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i?n&&!n.includes(i.role)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina."})]})}):(0,t.jsx)(t.Fragment,{children:r}):s||null}function z(e){let{children:r,requiredRoles:n}=e;return(0,t.jsx)(I,{requiredRoles:n,children:(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsx)(k,{}),(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsx)("div",{className:"container mx-auto p-6 md:p-8",children:r})})]})})}},2869:function(e,r,n){n.d(r,{d:function(){return d},z:function(){return o}});var t=n(7437),s=n(2265),a=n(7053),i=n(535),l=n(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:n,variant:s,size:i,asChild:o=!1,...c}=e,u=o?a.g7:"button";return(0,t.jsx)(u,{className:(0,l.cn)(d({variant:s,size:i,className:n})),ref:r,...c})});o.displayName="Button"},6070:function(e,r,n){n.d(r,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var t=n(7437),s=n(2265),a=n(4508);let i=s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})});i.displayName="Card";let l=s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",n),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",n),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:n,...s}=e;return(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter"},2102:function(e,r,n){n.d(r,{AuthProvider:function(){return c},a:function(){return u}});var t=n(7437),s=n(2265),a=n(7293),i=n(2148),l=n(5978);async function d(e){var r;let n=(0,l.JU)(a.db,"users",e.uid);if((await (0,l.QT)(n)).exists())return;let t=(0,l.IO)((0,l.hJ)(a.db,"users"),(0,l.ar)("role","==","admin"),(0,l.b9)(1)),s=!(await (0,l.PL)(t)).empty;await (0,l.pl)(n,{uid:e.uid,email:null!==(r=e.email)&&void 0!==r?r:"",role:s?"atendente":"admin",createdAt:(0,l.Bt)()},{merge:!0})}let o=(0,s.createContext)(void 0);function c(e){let{children:r}=e,[n,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!a.I)return;let e=(0,i.Aj)(a.I,async e=>{l(null!=e?e:null),u(!1),e&&await d({uid:e.uid,email:e.email})});return()=>e()},[]);let f=(0,s.useMemo)(()=>({user:n,loading:c,async signIn(e,r){a.I&&await (0,i.e5)(a.I,e,r)},async signUp(e,r){if(!a.I)return;let n=await (0,i.Xb)(a.I,e,r);await d({uid:n.user.uid,email:n.user.email})},async signOutUser(){a.I&&await (0,i.w7)(a.I)}}),[n,c]);return(0,t.jsx)(o.Provider,{value:f,children:r})}function u(){let e=(0,s.useContext)(o);if(!e)throw Error("useAuth deve ser usado dentro de <AuthProvider>");return e}},7293:function(e,r,n){n.d(r,{I:function(){return o},db:function(){return d}});var t=n(738),s=n(2148),a=n(5978),i=n(6485);let l=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyAaaXxKG4BwAKIBdDk0vrSNsQzK8BbWIA0",authDomain:"brancofilmcv.firebaseapp.com",projectId:"brancofilmcv",storageBucket:"brancofilmcv.firebasestorage.app",messagingSenderId:"513537369615",appId:"1:513537369615:web:6cfec35394b5852857e57a"}),d=(0,a.ad)(l);(0,i.cF)(l);let o=(0,s.v0)(l)},4508:function(e,r,n){n.d(r,{cn:function(){return a}});var t=n(1994),s=n(3335);function a(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return(0,s.m6)((0,t.W)(r))}}}]);