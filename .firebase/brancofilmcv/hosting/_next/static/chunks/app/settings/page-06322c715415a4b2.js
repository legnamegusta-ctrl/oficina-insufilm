(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{7082:function(e,r,s){Promise.resolve().then(s.bind(s,4797))},4797:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return Z}});var a=s(7437),t=s(2265),n=s(1221),i=s(6070),l=s(2869),o=s(7484),d=s(9501),c=s(5701),u=s(7119),m=s(5186),x=s(6815),f=s(3647),h=s(6110),p=s(5153),j=s(1731);let y=u.Ry({name:u.Z_().min(2,"Nome deve ter pelo menos 2 caracteres"),email:u.Z_().email("Email inv\xe1lido"),role:u.Km(["admin","atendente","instalador"]),password:u.Z_().min(6,"Senha deve ter pelo menos 6 caracteres").optional()});function v(e){let{user:r,open:s,onOpenChange:n,onSuccess:i}=e,[o,u]=(0,t.useState)(!1),v=!!r,g=(0,d.cI)({resolver:(0,c.F)(y),defaultValues:{name:(null==r?void 0:r.name)||"",email:(null==r?void 0:r.email)||"",role:(null==r?void 0:r.role)||"atendente",password:""}}),N=async e=>{try{if(u(!0),v&&r)await (0,j.Nq)(r.uid,{name:e.name,role:e.role}),(0,p.Am)({title:"Usu\xe1rio atualizado",description:"Usu\xe1rio foi atualizado com sucesso."});else{if(!e.password){(0,p.Am)({title:"Erro",description:"Senha \xe9 obrigat\xf3ria para novos usu\xe1rios.",variant:"destructive"});return}await (0,j.r4)(e.email,e.password,{name:e.name,role:e.role}),(0,p.Am)({title:"Usu\xe1rio criado",description:"Usu\xe1rio foi criado com sucesso."})}g.reset(),i(),n(!1)}catch(e){(0,p.Am)({title:"Erro",description:"Erro ao salvar usu\xe1rio. Tente novamente.",variant:"destructive"})}finally{u(!1)}};return(0,a.jsx)(h.Vq,{open:s,onOpenChange:n,children:(0,a.jsxs)(h.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(h.fK,{children:(0,a.jsx)(h.$N,{children:v?"Editar Usu\xe1rio":"Novo Usu\xe1rio"})}),(0,a.jsxs)("form",{onSubmit:g.handleSubmit(N),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"name",children:"Nome"}),(0,a.jsx)(m.I,{id:"name",...g.register("name"),placeholder:"Nome completo"}),g.formState.errors.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:g.formState.errors.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(m.I,{id:"email",type:"email",...g.register("email"),placeholder:"email@exemplo.com",disabled:v}),g.formState.errors.email&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:g.formState.errors.email.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"role",children:"Fun\xe7\xe3o"}),(0,a.jsxs)(f.Ph,{value:g.watch("role"),onValueChange:e=>g.setValue("role",e),children:[(0,a.jsx)(f.i4,{children:(0,a.jsx)(f.ki,{placeholder:"Selecione a fun\xe7\xe3o"})}),(0,a.jsxs)(f.Bw,{children:[(0,a.jsx)(f.Ql,{value:"admin",children:"Administrador"}),(0,a.jsx)(f.Ql,{value:"atendente",children:"Atendente"}),(0,a.jsx)(f.Ql,{value:"instalador",children:"Instalador"})]})]}),g.formState.errors.role&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:g.formState.errors.role.message})]}),!v&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x._,{htmlFor:"password",children:"Senha"}),(0,a.jsx)(m.I,{id:"password",type:"password",...g.register("password"),placeholder:"Senha (m\xednimo 6 caracteres)"}),g.formState.errors.password&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:g.formState.errors.password.message})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),(0,a.jsx)(l.z,{type:"submit",disabled:o,children:o?"Salvando...":v?"Atualizar":"Criar"})]})]})]})})}let g=(0,s(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var N=s(8930),w=s(5805),b=s(9397),k=s(8728),S=s(7099),C=s(5974);function Z(){let[e,r]=(0,t.useState)([]),[s,d]=(0,t.useState)(!0),[c,u]=(0,t.useState)(!1),[m,x]=(0,t.useState)(),[f,h]=(0,t.useState)(!1),[y,Z]=(0,t.useState)(null),_=async()=>{try{d(!0);let e=await (0,j.AW)();r(e)}catch(e){(0,p.Am)({title:"Erro",description:"Erro ao carregar usu\xe1rios.",variant:"destructive"})}finally{d(!1)}};(0,t.useEffect)(()=>{_()},[]);let A=e=>{x(e),u(!0)},z=e=>{Z(e),h(!0)},E=async()=>{if(y)try{await (0,j.h8)(y.uid),(0,p.Am)({title:"Usu\xe1rio exclu\xeddo",description:"Usu\xe1rio foi exclu\xeddo com sucesso."}),_()}catch(e){(0,p.Am)({title:"Erro",description:"Erro ao excluir usu\xe1rio.",variant:"destructive"})}finally{h(!1),Z(null)}},R=e=>{switch(e){case"admin":return"destructive";case"atendente":return"default";case"instalador":return"secondary";default:return"outline"}},U=e=>{switch(e){case"admin":return"Administrador";case"atendente":return"Atendente";case"instalador":return"Instalador";default:return e}},O=[{key:"name",label:"Nome",render:e=>e.name||e.email},{key:"email",label:"Email"},{key:"role",label:"Fun\xe7\xe3o",render:e=>(0,a.jsx)(C.C,{variant:R(e.role),children:U(e.role)})},{key:"createdAt",label:"Criado em",render:e=>e.createdAt&&"function"==typeof e.createdAt.toDate?e.createdAt.toDate().toLocaleDateString("pt-BR"):"-"},{key:"actions",label:"A\xe7\xf5es",render:e=>(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>A(e),children:(0,a.jsx)(g,{className:"h-4 w-4"})}),(0,a.jsx)(l.z,{variant:"ghost",size:"sm",onClick:()=>z(e),children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})}];return(0,a.jsxs)(n.L,{requiredRoles:["admin"],children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Configura\xe7\xf5es"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Configura\xe7\xf5es do sistema e usu\xe1rios"})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 mr-2"}),"Gerenciar Usu\xe1rios"]}),(0,a.jsxs)(l.z,{onClick:()=>{x(void 0),u(!0)},children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Novo Usu\xe1rio"]})]}),(0,a.jsx)(i.SZ,{children:"Gerencie usu\xe1rios do sistema e suas permiss\xf5es"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(o.w,{data:e,columns:O,loading:s,searchKey:"name",searchPlaceholder:"Buscar usu\xe1rios..."})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)(i.ll,{className:"flex items-center",children:[(0,a.jsx)(k.Z,{className:"h-5 w-5 mr-2"}),"Configura\xe7\xf5es Gerais"]}),(0,a.jsx)(i.SZ,{children:"Configura\xe7\xf5es da oficina e sistema"})]}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{children:"Funcionalidade em desenvolvimento..."})})})]})]}),(0,a.jsx)(v,{user:m,open:c,onOpenChange:u,onSuccess:_}),(0,a.jsx)(S.aR,{open:f,onOpenChange:h,children:(0,a.jsxs)(S._T,{children:[(0,a.jsxs)(S.fY,{children:[(0,a.jsx)(S.f$,{children:"Confirmar exclus\xe3o"}),(0,a.jsxs)(S.yT,{children:['Tem certeza que deseja excluir o usu\xe1rio "',(null==y?void 0:y.name)||(null==y?void 0:y.email),'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.']})]}),(0,a.jsxs)(S.xo,{children:[(0,a.jsx)(S.le,{children:"Cancelar"}),(0,a.jsx)(S.OL,{onClick:E,children:"Excluir"})]})]})})]})}},5974:function(e,r,s){"use strict";s.d(r,{C:function(){return l}});var a=s(7437);s(2265);var t=s(535),n=s(4508);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:r,variant:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:s}),r),...t})}},3647:function(e,r,s){"use strict";s.d(r,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var a=s(7437),t=s(2265),n=s(8856),i=s(875),l=s(2135),o=s(401),d=s(4508);let c=n.fC;n.ZA;let u=n.B4,m=t.forwardRef((e,r)=>{let{className:s,children:t,...l}=e;return(0,a.jsxs)(n.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[t,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let x=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(n.u_,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=n.u_.displayName;let f=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(n.$G,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let h=t.forwardRef((e,r)=>{let{className:s,children:t,position:i="popper",...l}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{ref:r,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(f,{})]})})});h.displayName=n.VY.displayName,t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(n.__,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=n.__.displayName;let p=t.forwardRef((e,r)=>{let{className:s,children:t,...i}=e;return(0,a.jsxs)(n.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:t})]})});p.displayName=n.ck.displayName,t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(n.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=n.Z0.displayName},8930:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});let a=(0,s(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[609,15,365,852,905,593,289,641,302,971,117,744],function(){return e(e.s=7082)}),_N_E=e.O()}]);