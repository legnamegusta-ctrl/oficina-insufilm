(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2707:function(e,t,n){Promise.resolve().then(n.bind(n,7340))},7340:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var u=n(2265),r=n(9376),a=n(2102);function i(){let{user:e,loading:t}=(0,a.a)(),n=(0,r.useRouter)();return(0,u.useEffect)(()=>{t||n.replace(e?"/dashboard":"/login")},[t,e,n]),null}},2102:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return l},a:function(){return d}});var u=n(7437),r=n(2265),a=n(7293),i=n(2148),s=n(5978);async function o(e){var t;let n=(0,s.JU)(a.db,"users",e.uid);if((await (0,s.QT)(n)).exists())return;let u=(0,s.IO)((0,s.hJ)(a.db,"users"),(0,s.ar)("role","==","admin"),(0,s.b9)(1)),r=!(await (0,s.PL)(u)).empty;await (0,s.pl)(n,{uid:e.uid,email:null!==(t=e.email)&&void 0!==t?t:"",role:r?"atendente":"admin",createdAt:(0,s.Bt)()},{merge:!0})}let c=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[n,s]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!a.I)return;let e=(0,i.Aj)(a.I,async e=>{s(null!=e?e:null),d(!1),e&&await o({uid:e.uid,email:e.email})});return()=>e()},[]);let f=(0,r.useMemo)(()=>({user:n,loading:l,async signIn(e,t){a.I&&await (0,i.e5)(a.I,e,t)},async signUp(e,t){if(!a.I)return;let n=await (0,i.Xb)(a.I,e,t);await o({uid:n.user.uid,email:n.user.email})},async signOutUser(){a.I&&await (0,i.w7)(a.I)}}),[n,l]);return(0,u.jsx)(c.Provider,{value:f,children:t})}function d(){let e=(0,r.useContext)(c);if(!e)throw Error("useAuth deve ser usado dentro de <AuthProvider>");return e}},7293:function(e,t,n){"use strict";n.d(t,{I:function(){return c},db:function(){return o}});var u=n(738),r=n(2148),a=n(5978),i=n(6485);let s=(0,u.C6)().length?(0,u.Mq)():(0,u.ZF)({apiKey:"AIzaSyAaaXxKG4BwAKIBdDk0vrSNsQzK8BbWIA0",authDomain:"brancofilmcv.firebaseapp.com",projectId:"brancofilmcv",storageBucket:"brancofilmcv.firebasestorage.app",messagingSenderId:"513537369615",appId:"1:513537369615:web:6cfec35394b5852857e57a"}),o=(0,a.ad)(s);(0,i.cF)(s);let c=(0,r.v0)(s)},9376:function(e,t,n){"use strict";var u=n(5475);n.o(u,"usePathname")&&n.d(t,{usePathname:function(){return u.usePathname}}),n.o(u,"useRouter")&&n.d(t,{useRouter:function(){return u.useRouter}})}},function(e){e.O(0,[609,15,365,971,117,744],function(){return e(e.s=2707)}),_N_E=e.O()}]);