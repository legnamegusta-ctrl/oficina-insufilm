(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{2947:function(e,t,r){Promise.resolve().then(r.bind(r,8799))},8799:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var s=r(7437),a=r(2265),i=r(1221),n=r(7484),o=r(9501),l=r(5701),c=r(7119),d=r(2869),u=r(5186),f=r(6815),v=r(6818),x=r(6741),m=r(8575),h=r(3966),b=r(886),p=r(6718),g=r(420),j=r(6840),y="Switch",[N,w]=(0,h.b)(y),[k,S]=N(y),C=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:i,checked:n,defaultChecked:o,required:l,disabled:c,value:d="on",onCheckedChange:u,form:f,...v}=e,[h,p]=a.useState(null),g=(0,m.e)(t,e=>p(e)),y=a.useRef(!1),N=!h||f||!!h.closest("form"),[w=!1,S]=(0,b.T)({prop:n,defaultProp:o,onChange:u});return(0,s.jsxs)(k,{scope:r,checked:w,disabled:c,children:[(0,s.jsx)(j.WV.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":Z(w),"data-disabled":c?"":void 0,disabled:c,value:d,...v,ref:g,onClick:(0,x.M)(e.onClick,e=>{S(e=>!e),N&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),N&&(0,s.jsx)(R,{control:h,bubbles:!y.current,name:i,value:d,checked:w,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"}})]})});C.displayName=y;var P="SwitchThumb",E=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,i=S(P,r);return(0,s.jsx)(j.WV.span,{"data-state":Z(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});E.displayName=P;var R=e=>{let{control:t,checked:r,bubbles:i=!0,...n}=e,o=a.useRef(null),l=(0,p.D)(r),c=(0,g.t)(t);return a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[l,r,i]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Z(e){return e?"checked":"unchecked"}var T=r(4508);let F=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(C,{className:(0,T.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:t,children:(0,s.jsx)(E,{className:(0,T.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});F.displayName=C.displayName;var M=r(6070),A=r(5613),V=r(1817);let D=c.Ry({name:c.Z_().min(1,"Nome do servi\xe7o \xe9 obrigat\xf3rio"),basePrice:c.Rx().min(0,"Pre\xe7o deve ser maior ou igual a zero"),description:c.Z_().optional(),active:c.O7()});function I(e){let{service:t,onSubmit:r,onCancel:a,loading:i=!1}=e,{register:n,handleSubmit:c,watch:x,setValue:m,formState:{errors:h}}=(0,o.cI)({resolver:(0,l.F)(D),defaultValues:{name:(null==t?void 0:t.name)||"",basePrice:(null==t?void 0:t.basePrice)||0,description:(null==t?void 0:t.description)||"",active:(null==t?void 0:t.active)===void 0||t.active}}),b=async e=>{try{await r(e)}catch(e){console.error("Error submitting form:",e)}};return(0,s.jsxs)(M.Zb,{className:"w-full max-w-2xl mx-auto",children:[(0,s.jsxs)(M.Ol,{children:[(0,s.jsx)(M.ll,{children:t?"Editar Servi\xe7o":"Novo Servi\xe7o"}),(0,s.jsx)(M.SZ,{children:t?"Atualize as informa\xe7\xf5es do servi\xe7o":"Preencha os dados do novo servi\xe7o"})]}),(0,s.jsx)(M.aY,{children:(0,s.jsxs)("form",{onSubmit:c(b),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"name",children:"Nome do Servi\xe7o *"}),(0,s.jsx)(u.I,{id:"name",...n("name"),disabled:i,placeholder:"Ex: Insufilm Para-brisa, Laterais, Traseiro"}),h.name&&(0,s.jsx)(A.bZ,{variant:"destructive",children:(0,s.jsx)(A.X,{children:h.name.message})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"basePrice",children:"Pre\xe7o Base (R$) *"}),(0,s.jsx)(u.I,{id:"basePrice",type:"number",step:"0.01",...n("basePrice",{valueAsNumber:!0}),disabled:i,placeholder:"150.00"}),h.basePrice&&(0,s.jsx)(A.bZ,{variant:"destructive",children:(0,s.jsx)(A.X,{children:h.basePrice.message})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,s.jsx)(v.g,{id:"description",...n("description"),disabled:i,placeholder:"Descri\xe7\xe3o detalhada do servi\xe7o...",rows:3}),h.description&&(0,s.jsx)(A.bZ,{variant:"destructive",children:(0,s.jsx)(A.X,{children:h.description.message})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(F,{id:"active",checked:x("active"),onCheckedChange:e=>m("active",e),disabled:i}),(0,s.jsx)(f._,{htmlFor:"active",children:"Servi\xe7o ativo"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsx)(d.z,{type:"button",variant:"outline",onClick:a,disabled:i,children:"Cancelar"}),(0,s.jsxs)(d.z,{type:"submit",disabled:i,children:[i&&(0,s.jsx)(V.Z,{className:"mr-2 h-4 w-4 animate-spin"}),t?"Atualizar":"Criar"," Servi\xe7o"]})]})]})})]})}var _=r(5974),z=r(6110),O=r(7099),L=r(8356),W=r(9205);let Y=(0,W.Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),q=(0,W.Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);var X=r(9397),$=r(9525),B=r(5252),K=r(1731),Q=r(5153);function U(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[b,p]=(0,a.useState)(!1),[g,j]=(0,a.useState)("all"),{toast:y}=(0,Q.pm)();(0,a.useEffect)(()=>{N()},[]);let N=async()=>{try{o(!0);let e=await K.nF.getAll();t(e)}catch(e){console.error("Error loading data:",e),y({title:"Erro",description:"Erro ao carregar servi\xe7os",variant:"destructive"})}finally{o(!1)}},w=async e=>{try{p(!0),l?(await K.nF.update(l.id,e),y({title:"Sucesso",description:"Servi\xe7o atualizado com sucesso"})):(await K.nF.create(e),y({title:"Sucesso",description:"Servi\xe7o criado com sucesso"})),await N(),f(!1),c(null)}catch(e){console.error("Error saving service:",e),y({title:"Erro",description:"Erro ao salvar servi\xe7o",variant:"destructive"})}finally{p(!1)}},k=async e=>{try{await K.nF.toggleActive(e.id),y({title:"Sucesso",description:"Servi\xe7o ".concat(e.active?"desativado":"ativado"," com sucesso")}),await N()}catch(e){console.error("Error toggling service:",e),y({title:"Erro",description:"Erro ao alterar status do servi\xe7o",variant:"destructive"})}},S=async()=>{if(m)try{await K.nF.delete(m.id),y({title:"Sucesso",description:"Servi\xe7o exclu\xeddo com sucesso"}),await N()}catch(e){console.error("Error deleting service:",e),y({title:"Erro",description:"Erro ao excluir servi\xe7o",variant:"destructive"})}finally{x(!1),h(null)}},C=[{key:"name",title:"Nome do Servi\xe7o",sortable:!0},{key:"basePrice",title:"Pre\xe7o Base",render:e=>"R$ ".concat(e.toFixed(2))},{key:"description",title:"Descri\xe7\xe3o",render:e=>e||"-"},{key:"active",title:"Status",render:e=>(0,s.jsx)(_.C,{variant:e?"secondary":"outline",children:e?"Ativo":"Inativo"})},{key:"actions",title:"A\xe7\xf5es",render:(e,t)=>(0,s.jsx)(d.z,{variant:"ghost",size:"sm",onClick:()=>k(t),children:t.active?(0,s.jsx)(Y,{className:"h-4 w-4 text-green-600"}):(0,s.jsx)(q,{className:"h-4 w-4 text-gray-400"})})}],P=e.filter(e=>e.active),E=e.length>0?e.reduce((e,t)=>e+t.basePrice,0)/e.length:0;return(0,s.jsx)(i.L,{requiredRoles:["admin","atendente"],children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Servi\xe7os"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Tabela de pre\xe7os e servi\xe7os"})]}),(0,s.jsxs)(d.z,{onClick:()=>f(!0),children:[(0,s.jsx)(X.Z,{className:"h-4 w-4 mr-2"}),"Novo Servi\xe7o"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(M.Zb,{children:[(0,s.jsxs)(M.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(M.ll,{className:"text-sm font-medium",children:"Total de Servi\xe7os"}),(0,s.jsx)($.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(M.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.length})})]}),(0,s.jsxs)(M.Zb,{children:[(0,s.jsxs)(M.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(M.ll,{className:"text-sm font-medium",children:"Servi\xe7os Ativos"}),(0,s.jsx)(_.C,{variant:"secondary",children:P.length})]}),(0,s.jsx)(M.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:P.length})})]}),(0,s.jsxs)(M.Zb,{children:[(0,s.jsxs)(M.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(M.ll,{className:"text-sm font-medium",children:"Pre\xe7o M\xe9dio"}),(0,s.jsx)(B.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(M.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",E.toFixed(2)]})})]}),(0,s.jsxs)(M.Zb,{children:[(0,s.jsxs)(M.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(M.ll,{className:"text-sm font-medium",children:"Maior Pre\xe7o"}),(0,s.jsx)(B.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(M.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["R$ ",e.length>0?Math.max(...e.map(e=>e.basePrice)).toFixed(2):"0.00"]})})]})]}),(0,s.jsxs)(L.mQ,{value:g,onValueChange:j,className:"space-y-4",children:[(0,s.jsxs)(L.dr,{children:[(0,s.jsx)(L.SP,{value:"all",children:"Todos"}),(0,s.jsx)(L.SP,{value:"active",children:"Ativos"}),(0,s.jsx)(L.SP,{value:"inactive",children:"Inativos"})]}),(0,s.jsx)(L.nU,{value:g,children:(0,s.jsx)(n.w,{data:(()=>{switch(g){case"active":return e.filter(e=>e.active);case"inactive":return e.filter(e=>!e.active);default:return e}})(),columns:C,title:"Lista de Servi\xe7os",description:"Servi\xe7os dispon\xedveis e pre\xe7os",searchPlaceholder:"Buscar por nome ou descri\xe7\xe3o...",onAdd:()=>f(!0),onEdit:e=>{c(e),f(!0)},onDelete:e=>{h(e),x(!0)},loading:r,addButtonText:"Novo Servi\xe7o"})})]}),(0,s.jsx)(z.Vq,{open:u,onOpenChange:f,children:(0,s.jsx)(z.cZ,{className:"max-w-2xl",children:(0,s.jsx)(I,{service:l||void 0,onSubmit:w,onCancel:()=>{f(!1),c(null)},loading:b})})}),(0,s.jsx)(O.aR,{open:v,onOpenChange:x,children:(0,s.jsxs)(O._T,{children:[(0,s.jsxs)(O.fY,{children:[(0,s.jsx)(O.f$,{children:"Confirmar Exclus\xe3o"}),(0,s.jsx)(O.yT,{children:"Tem certeza que deseja excluir este servi\xe7o? Esta a\xe7\xe3o n\xe3o pode ser desfeita."})]}),(0,s.jsxs)(O.xo,{children:[(0,s.jsx)(O.le,{children:"Cancelar"}),(0,s.jsx)(O.OL,{onClick:S,className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})]})})]})})}},5613:function(e,t,r){"use strict";r.d(t,{X:function(){return c},bZ:function(){return l}});var s=r(7437),a=r(2265),i=r(535),n=r(4508);let o=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(o({variant:a}),r),...i})});l.displayName="Alert",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})}).displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});c.displayName="AlertDescription"},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var s=r(7437);r(2265);var a=r(535),i=r(4508);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)(n({variant:r}),t),...a})}},8356:function(e,t,r){"use strict";r.d(t,{mQ:function(){return R},nU:function(){return F},dr:function(){return Z},SP:function(){return T}});var s=r(7437),a=r(2265),i=r(6741),n=r(3966),o=r(1353),l=r(1599),c=r(6840),d=r(9114),u=r(886),f=r(9255),v="Tabs",[x,m]=(0,n.b)(v,[o.Pc]),h=(0,o.Pc)(),[b,p]=x(v),g=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:i,defaultValue:n,orientation:o="horizontal",dir:l,activationMode:v="automatic",...x}=e,m=(0,d.gm)(l),[h,p]=(0,u.T)({prop:a,onChange:i,defaultProp:n});return(0,s.jsx)(b,{scope:r,baseId:(0,f.M)(),value:h,onValueChange:p,orientation:o,dir:m,activationMode:v,children:(0,s.jsx)(c.WV.div,{dir:m,"data-orientation":o,...x,ref:t})})});g.displayName=v;var j="TabsList",y=a.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...i}=e,n=p(j,r),l=h(r);return(0,s.jsx)(o.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:(0,s.jsx)(c.WV.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:t})})});y.displayName=j;var N="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,disabled:n=!1,...l}=e,d=p(N,r),u=h(r),f=C(d.baseId,a),v=P(d.baseId,a),x=a===d.value;return(0,s.jsx)(o.ck,{asChild:!0,...u,focusable:!n,active:x,children:(0,s.jsx)(c.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":v,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:f,...l,ref:t,onMouseDown:(0,i.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(a)}),onKeyDown:(0,i.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(a)}),onFocus:(0,i.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;x||n||!e||d.onValueChange(a)})})})});w.displayName=N;var k="TabsContent",S=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,forceMount:n,children:o,...d}=e,u=p(k,r),f=C(u.baseId,i),v=P(u.baseId,i),x=i===u.value,m=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(l.z,{present:n||x,children:r=>{let{present:a}=r;return(0,s.jsx)(c.WV.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!a,id:v,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:a&&o})}})});function C(e,t){return"".concat(e,"-trigger-").concat(t)}function P(e,t){return"".concat(e,"-content-").concat(t)}S.displayName=k;var E=r(4508);let R=g,Z=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(y,{ref:t,className:(0,E.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});Z.displayName=y.displayName;let T=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(w,{ref:t,className:(0,E.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});T.displayName=w.displayName;let F=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(S,{ref:t,className:(0,E.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})});F.displayName=S.displayName},6818:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var s=r(7437),a=r(2265),i=r(4508);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});n.displayName="Textarea"},1817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6718:function(e,t,r){"use strict";r.d(t,{D:function(){return a}});var s=r(2265);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[609,15,365,852,905,593,641,302,971,117,744],function(){return e(e.s=2947)}),_N_E=e.O()}]);